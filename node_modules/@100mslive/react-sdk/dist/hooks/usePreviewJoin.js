import{__awaiter as e}from"../node_modules/tslib/tslib.es6.mjs.js";import{useMemo as i,useCallback as o}from"react";import{selectRoomState as t,selectIsConnectedToRoom as r,HMSRoomState as n}from"@100mslive/hms-video-store";import{useHMSActions as a,useHMSStore as s}from"../primitives/HmsRoomProvider.js";import{logErrorHandler as m}from"../utils/commons.js";const c=({name:c="",token:d,metadata:v,handleError:l=m,initEndpoint:u,initialSettings:p,captureNetworkQualityInPreview:f,asRole:k,autoManageVideo:w,autoManageWakeLock:j,iceServers:y})=>{const g=a(),h=s(t),b=s(r)||!1,M=h===n.Preview,P=i((()=>({userName:c,authToken:d,metaData:v,rememberDeviceSelection:!0,settings:p,initEndpoint:u,asRole:k,captureNetworkQualityInPreview:f,autoManageVideo:w,autoManageWakeLock:j,iceServers:y})),[c,d,v,u,p,f,k,w,j,y]),S=o((()=>e(void 0,void 0,void 0,(function*(){if(d)try{(b||h!==n.Disconnected)&&(yield g.leave().catch((()=>{}))),yield g.preview(P)}catch(e){l(e,"preview")}}))),[d,b,h,g,P,l]);return{enableJoin:M,join:o((()=>e(void 0,void 0,void 0,(function*(){if(d)try{yield g.join(P)}catch(e){l(e,"join")}}))),[g,P,l,d]),isConnected:b,preview:S}};export{c as usePreviewJoin};
//# sourceMappingURL=usePreviewJoin.js.map
